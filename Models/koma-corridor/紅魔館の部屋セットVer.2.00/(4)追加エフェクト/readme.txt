WorkingFloorX.fx ver0.0.1

床面鏡像描画＋Xシャドー描画を行います．
以前作成したWorkingFloor2.fxにXシャドーを追加しました．
Xシャドーについてはmqdl氏のxshadow.fxを参考にしました．

エフェクトモデル一つ読むだけですべての人型モデルにXシャドーが追加できます．
Xシャドーのサイズはモデルの大きさで,濃度はライトの強さで自動調整されます．


・使用方法
(1)MMDの地面影は非表示に設定してください．
(2)WorkingFloorX.xをMMDにロードします．
(3)WorkingFloorX.fxの先頭にあるオフスクリーンレンダ定義の所定場所に適用するモデルを追加してください．
   デフォルトでは 全てのPMD・PMX が適用されています．

   例) 初音ミク.pmd, 鏡音リン.pmd, negi.x を適用する場合の記述方法

        "初音ミク.pmd = WF_Object.fx;"
        "鏡音リン.pmd = WF_Object.fx;"
        "negi.x = WF_Object.fx;"

(4)MMDのアクセサリパラメータで以下の変更を行いキーフレーム登録してください．
    Tr：床面鏡像の透過度
    その他のパラメータで床の描画範囲を設定します．
    エフェクトをoffにした時のWorkingFloorX.xの白い板ポリ内が描画範囲になります．
(5)XシャドーについてはWF_XShadow.fxの先頭パラメータを必要に応じて変更してください
(6)描画順序は，背景ステージ→WorkingFloorX.x→その他のオブジェクトの順に設定してください．

Tr=0にすることでXシャドーのみの表示も可能ですが,内部では鏡像描画も行っていて処理の無駄になります．
鏡像描画処理を完全に無くしたい場合はWorkingFloorX.fxの先頭パラメータの書き換えをおすすめします．


・応用
WorkingFloorX.xを別形状のモデルに置き換えることでステージの形状に合わせて鏡像描画する範囲を
制限することが出来ます．

Xシャドーと床面鏡像の間に床アクセを挟みたい場合はWorkingFloor2と併用することで可能になります。
　①WorkingFloorX.fxの先頭パラメータの書き換えて鏡像描画処理をOFFにする
　②WorkingFloor2.x,WorkingFloorX.x両方ロードして、描画順をWorkingFloor2.x→床アクセ→WorkingFloorX.xにする


※このFXファイルはMMEver0.24以降でないと正しく動作しません。


・更新履歴
v0.0.2  2011/9/28   マスク処理を使わずに描画できるように改良(レンダリング負荷軽減)
v0.0.1  2011/9/18   初回版公開


・免責事項
ご利用はすべて自己責任でお願いします．


by 針金P


